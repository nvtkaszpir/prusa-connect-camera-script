
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nvtkaszpir.github.io/prusa-connect-camera-script/configuration.tuning/">
      
      
        <link rel="prev" href="../service.kubernetes/">
      
      
        <link rel="next" href="../configuration.env.full/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>Configuration Tuning - Prusa Connect Camera Script</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2274DKHTEZ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2274DKHTEZ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2274DKHTEZ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-tuning" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Prusa Connect Camera Script" class="md-header__button md-logo" aria-label="Prusa Connect Camera Script" data-md-component="logo">
      
  <img src="../static/prusa-connect-cam.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prusa Connect Camera Script
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration Tuning
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nvtkaszpir/prusa-connect-camera-script" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Prusa Connect Camera Script" class="md-nav__button md-logo" aria-label="Prusa Connect Camera Script" data-md-component="logo">
      
  <img src="../static/prusa-connect-cam.png" alt="logo">

    </a>
    Prusa Connect Camera Script
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nvtkaszpir/prusa-connect-camera-script" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Preparation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Preparation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../known.limitations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known Limitations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration.overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration.env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Env vars
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Prusa Connect
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Prusa Connect
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prusa.connect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add camera to Prusa Connect
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Camera configs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Camera configs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.csi.legacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSI (legacy)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.csi.libcamera/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.esphome.snapshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ESPHome Snapshot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.esphome.stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ESPHome Stream
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.motioneye/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MotionEye
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.usb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    USB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.snapshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Cams - Snapshot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.hls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Cams - HLS streams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.mjpg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Cams - MJPG streams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config.for.camera.rtsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Cams - RTSP streams
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Test
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Test
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test.config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service.systemd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systemd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service.docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service.kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Configuration Tuning
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Configuration Tuning
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-predictable-camera-device-names" class="md-nav__link">
    <span class="md-ellipsis">
      Using predictable camera device names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-higher-quality-camera-images" class="md-nav__link">
    <span class="md-ellipsis">
      Getting higher quality camera images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-video-camera-controls" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up video camera controls
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Image issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dropping-frames" class="md-nav__link">
    <span class="md-ellipsis">
      Dropping frames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delay" class="md-nav__link">
    <span class="md-ellipsis">
      Delay
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-flip-and-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Image flip and rotation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image flip and rotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rpicam-still" class="md-nav__link">
    <span class="md-ellipsis">
      rpicam-still
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fswebcam" class="md-nav__link">
    <span class="md-ellipsis">
      fswebcam
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ffmpeg" class="md-nav__link">
    <span class="md-ellipsis">
      ffmpeg
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ffmpeg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-v4l2-options" class="md-nav__link">
    <span class="md-ellipsis">
      Adding v4l2 options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-timestamp-to-the-image" class="md-nav__link">
    <span class="md-ellipsis">
      Adding timestamp to the image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Other processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-output-quality" class="md-nav__link">
    <span class="md-ellipsis">
      Image output quality
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration.env.full/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration all env vars
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stream.mediamtx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming cameras with mediamtx
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-predictable-camera-device-names" class="md-nav__link">
    <span class="md-ellipsis">
      Using predictable camera device names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-higher-quality-camera-images" class="md-nav__link">
    <span class="md-ellipsis">
      Getting higher quality camera images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-video-camera-controls" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up video camera controls
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Image issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dropping-frames" class="md-nav__link">
    <span class="md-ellipsis">
      Dropping frames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delay" class="md-nav__link">
    <span class="md-ellipsis">
      Delay
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-flip-and-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Image flip and rotation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image flip and rotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rpicam-still" class="md-nav__link">
    <span class="md-ellipsis">
      rpicam-still
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fswebcam" class="md-nav__link">
    <span class="md-ellipsis">
      fswebcam
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ffmpeg" class="md-nav__link">
    <span class="md-ellipsis">
      ffmpeg
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ffmpeg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-v4l2-options" class="md-nav__link">
    <span class="md-ellipsis">
      Adding v4l2 options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-timestamp-to-the-image" class="md-nav__link">
    <span class="md-ellipsis">
      Adding timestamp to the image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Other processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-output-quality" class="md-nav__link">
    <span class="md-ellipsis">
      Image output quality
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="configuration-tuning">Configuration tuning</h1>
<p>Assuming you already have a working camera with basic setup, we can tune it further.</p>
<p>Below steps depend on the camera capabilities, thus your mileage may vary.</p>
<p>Notice that Prusa Connect has file size limit something about 8MB of the image uploaded,
so there may be no point in getting images with super high resolutions.</p>
<h2 id="using-predictable-camera-device-names">Using predictable camera device names</h2>
<p>Sometimes devices change their id so once given camera is under <code>/dev/video1</code>
while another restart and it is under <code>/dev/video2</code> and swaps with another one.</p>
<p>If you want to have a predictable camera identifiers then see directory
<code>/dev/v4l/by-id</code> or <code>/dev/v4l/by-path</code> and choose the one that you prefer</p>
<p>Example on Raspberry Pi with CSI camera and two USB cameras:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pi@hormex:~ $ tree /dev/v4l
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>/dev/v4l
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>├── by-id
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│   ├── usb-Generic_USB_Camera_200901010001-video-index0 -&gt; ../../video3
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│   ├── usb-Generic_USB_Camera_200901010001-video-index1 -&gt; ../../video4
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>│   ├── usb-Microsoft_Microsoft®_LifeCam_HD-3000-video-index0 -&gt; ../../video1
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│   └── usb-Microsoft_Microsoft®_LifeCam_HD-3000-video-index1 -&gt; ../../video2
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>└── by-path
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    ├── platform-bcm2835-codec-video-index0 -&gt; ../../video18
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    ├── platform-bcm2835-isp-video-index0 -&gt; ../../video20
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    ├── platform-bcm2835-isp-video-index1 -&gt; ../../video21
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    ├── platform-bcm2835-isp-video-index2 -&gt; ../../video22
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    ├── platform-bcm2835-isp-video-index3 -&gt; ../../video23
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    ├── platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0-video-index0 -&gt; ../../video3
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    ├── platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0-video-index1 -&gt; ../../video4
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    ├── platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.4:1.0-video-index0 -&gt; ../../video1
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    ├── platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.4:1.0-video-index1 -&gt; ../../video2
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    ├── platform-fe801000.csi-video-index0 -&gt; ../../video0
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    └── platform-feb10000.codec-video-index0 -&gt; ../../video19
</span></code></pre></div>
<p>so now if I want to have a Camera-1 always to point to the LifeCam_HD-3000
I can use:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">CAMERA_DEVICE</span><span class="o">=</span>/dev/v4l/by-id/usb-Microsoft_Microsoft®_LifeCam_HD-3000-video-index0
</span></code></pre></div>
<p>and for CSI camera (notice it is not available under <code>by-id</code>):</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nv">CAMERA_DEVICE</span><span class="o">=</span>/dev/v4l/by-path/platform-fe801000.csi-video-index0
</span></code></pre></div>
<h2 id="getting-higher-quality-camera-images">Getting higher quality camera images</h2>
<p>Use <code>v4l2-ctl</code> to get the list of available resolutions that camera provides
and then update it in the env var configs.</p>
<p>Run <code>v4l2-ctl --list-formats-ext -d /dev/video0</code> where <code>/dev/video0</code> is a device
listed from command above.</p>
<p>Example output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>v4l2-ctl --list-formats-ext -d /dev/video1
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>ioctl: VIDIOC_ENUM_FMT
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>  Type: Video Capture
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>  [0]: &#39;MJPG&#39; (Motion-JPEG, compressed)
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    Size: Discrete 640x480
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    Size: Discrete 640x360
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    Size: Discrete 352x288
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    Size: Discrete 320x240
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    Size: Discrete 176x144
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    Size: Discrete 160x120
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    Size: Discrete 800x600
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>    Size: Discrete 1280x720
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>    Size: Discrete 1280x960
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>    Size: Discrete 640x480
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>  [1]: &#39;YUYV&#39; (YUYV 4:2:2)
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>    Size: Discrete 640x480
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>    Size: Discrete 640x360
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>    Size: Discrete 352x288
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>    Size: Discrete 320x240
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>    Size: Discrete 176x144
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>    Size: Discrete 160x120
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>    Size: Discrete 800x600
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>      Interval: Discrete 0.200s (5.000 fps)
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a>    Size: Discrete 1280x720
</span><span id="__span-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>      Interval: Discrete 0.200s (5.000 fps)
</span><span id="__span-3-46"><a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>    Size: Discrete 1280x960
</span><span id="__span-3-47"><a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a>      Interval: Discrete 0.200s (5.000 fps)
</span><span id="__span-3-48"><a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a>    Size: Discrete 640x480
</span><span id="__span-3-49"><a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>      Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-3-50"><a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>      Interval: Discrete 0.033s (30.000 fps)
</span></code></pre></div>
<p>As you can see if I set video to YUYV and with resolution higher than 800x600
I would get only 5 frames per second.
For still images this is not a problem, but for video streaming that could be
too low and I would have to switch to MJPG (or actually mjpeg in ffmpeg)</p>
<p>For Raspberry Cam v2 you could use <code>csi.dist</code> as source and add
<code>--mode 2592:1944:12:P</code> to the <code>CAMERA_COMMAND_EXTRA_PARAMS</code>.</p>
<p>For certain USB cameras (such as Tracer Endoscope) you should use <code>usb.dist</code> and
you should be able to add <code>--resolution 1280x960</code> to the <code>CAMERA_COMMAND_EXTRA_PARAMS</code>.</p>
<h2 id="setting-up-video-camera-controls">Setting up video camera controls</h2>
<p>Video controls are things like brightness, auto white balance (awb),
exposure and so on.</p>
<p>Get device capabilities, especially <code>User controls</code>:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>v4l2-ctl<span class="w"> </span>-d<span class="w"> </span>/dev/video0<span class="w"> </span>-l
</span></code></pre></div>
<p>Those params can be passed in various ways, depending on the requirement:</p>
<ul>
<li><code>CAMERA_COMMAND_EXTRA_PARAMS</code> emv var, when using given tool directly</li>
<li><code>CAMERA_SETUP_COMMAND</code> env var for some complex use cases</li>
<li>other (probably directly via v4l when using ffmpeg, not tested)</li>
</ul>
<p>and set accordingly parameters you want , you just need to pass them fswebcam,
for example:</p>
<p><code>CAMERA_COMMAND_EXTRA_PARAMS=--resolution 1280x960 --no-banner -s auto_exposure=1,brightness=128,contrast=5</code></p>
<p>For more advanced options see <code>CAMERA_SETUP_COMMAND</code> env var, for example:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nv">CAMERA_SETUP_COMMAND</span><span class="o">=</span><span class="s2">&quot;v4l2-ctl --set-ctrl brightness=64,gamma=300 -d </span><span class="nv">$CAMERA_DEVICE</span><span class="s2">&quot;</span>
</span></code></pre></div>
<p>remember to restart given camera service.</p>
<p>You can try to use <code>guvcview</code> desktop application to check prams in realtime.</p>
<h2 id="image-issues">Image issues</h2>
<p>If your captured image has below issues:</p>
<ul>
<li>
<p>the whole image is too dark or too bright and it changes with every capture
  so it get too dark or too bright in a matter of minutes:
  <img alt="image.artifacts.dark" src="../static/image.artifacts.dark.jpg" />
  <img alt="image.artifacts.normal" src="../static/image.artifacts.normal.jpg" />
  <img alt="image.artifacts.bright" src="../static/image.artifacts.bright.jpg" /></p>
</li>
<li>
<p>has some horizontal/vertical super bright/dark areas:
  <img alt="image.artifacts.0" src="../static/image.artifacts.0.jpg" />
  <img alt="image.artifacts.1" src="../static/image.artifacts.1.jpg" /></p>
</li>
<li>
<p>some visible artifacts such as colored blocks or missing image fragments:
  <img alt="image.artifacts.2" src="../static/image.artifacts.2.jpg" />
  <img alt="image.artifacts.3" src="../static/image.artifacts.3.jpg" />
  <img alt="image.artifacts.4" src="../static/image.artifacts.4.jpg" /></p>
</li>
</ul>
<p>then you may need to initialize camera and capture it with a delay
or drop initial number of frames.</p>
<p>Notice that sometimes you cannot do much about it (remote cams) because some
camera images will be broken anyway, then I suggest changing camera.</p>
<h3 id="dropping-frames">Dropping frames</h3>
<p>Usually this is the fastest and with <code>fswebcam</code> it can be achieved by passing <code>-S</code>
param, for example</p>
<p><code>-S 10</code> will skip 10 first frames.</p>
<h3 id="delay">Delay</h3>
<p><code>fswebcam</code>  param <code>-d 2</code> will delay capture for 2 seconds, for some cameras it may
help, especially when using auto white balance or auto exposure.</p>
<h2 id="image-flip-and-rotation">Image flip and rotation</h2>
<p>You can pass on params to rpicam-still or fswebcam as you want.</p>
<h3 id="rpicam-still">rpicam-still</h3>
<p>See <code>rpicam-still --help</code></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>  --hflip      Read out with horizontal mirror
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>  --vflip      Read out with vertical flip
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>  --rotation   Use hflip and vflip to create the given rotation &lt;angle&gt;
</span></code></pre></div>
<p>so for example:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nv">CAMERA_COMMAND</span><span class="o">=</span>rpicam-still
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nv">CAMERA_COMMAND_EXTRA_PARAMS</span><span class="o">=</span><span class="s2">&quot;--rotation 90 --immediate --nopreview --thumb none -o&quot;</span>
</span></code></pre></div>
<h3 id="fswebcam">fswebcam</h3>
<p>See <code>fswebcam --help</code></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>  --flip &lt;direction&gt;       Flips the image. (h, v)
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  --crop &lt;size&gt;[,&lt;offset&gt;] Crop a part of the image.
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>  --scale &lt;size&gt;           Scales the image.
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>  --rotate &lt;angle&gt;         Rotates the image in right angles.
</span></code></pre></div>
<p>so for example:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nv">CAMERA_COMMAND</span><span class="o">=</span>fswebcam
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nv">CAMERA_COMMAND_EXTRA_PARAMS</span><span class="o">=</span><span class="s2">&quot;--flip v --resolution 640x480 --no-banner&quot;</span>
</span></code></pre></div>
<p>or to skip first 10 frames (<code>-S 10</code>, helps to get proper auto white balance and
image exposure) and pass on camera controls:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nv">CAMERA_COMMAND</span><span class="o">=</span>fswebcam
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nv">CAMERA_COMMAND_EXTRA_PARAMS</span><span class="o">=</span><span class="s2">&quot;-S 10 --resolution 1280x720 --no-banner -s auto_exposure=1,brightness=128,contrast=5&quot;</span>
</span></code></pre></div>
<h2 id="ffmpeg">ffmpeg</h2>
<p>When curl is not enough and you don't really want to physically rotate your camera,
then use ffmpeg for post processing.
You can process static images with it, load v4l2 devices... whatever.</p>
<p>With ffmpeg you can do interesting things with filters, it will just require
more computing power.</p>
<h3 id="adding-v4l2-options">Adding v4l2 options</h3>
<p><code>v4l2</code> can be used as alias for <code>video4linux2</code>.</p>
<p>You can pass video4linux options to ffmpeg on device initialization, for example:</p>
<!-- markdownlint-disable line_length -->
<div class="language-shell highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ffmpeg<span class="w"> </span>-f<span class="w"> </span>v4l2<span class="w"> </span>-pix_fmt<span class="w"> </span>mjpeg<span class="w"> </span>-video_size<span class="w"> </span>1280x960<span class="w"> </span>-framerate<span class="w"> </span><span class="m">30</span><span class="w"> </span>-i<span class="w"> </span>/dev/video1<span class="w"> </span><span class="se">\</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-preset<span class="w"> </span>ultrafast<span class="w"> </span>-b:v<span class="w"> </span>6000k<span class="w"> </span>-f<span class="w"> </span>rtsp<span class="w"> </span>rtsp://localhost:<span class="nv">$RTSP_PORT</span>/<span class="nv">$MTX_PATH</span>
</span></code></pre></div>
<!-- markdownlint-enable line_length -->

<p>would instruct ffmpeg to use video4linux and force it to talk to the camera under
/dev/video1 and forcing mjpeg encoder, resolution and framerate.</p>
<p>This command above is directly taken from <a href="../stream.mediamtx/">mediamtx</a>.</p>
<p>For more params, see <a href="https://ffmpeg.org/ffmpeg-devices.html#video4linux2_002c-v4l2">official ffmpeg docs</a>.
Just remember to pass them before defining input (<code>-i /dev/video1</code>).</p>
<h3 id="rotation">Rotation</h3>
<p>See <a href="https://superuser.com/questions/578321/how-can-i-rotate-a-video-180-with-ffmpeg">here</a>
for basic ones.</p>
<p>You probably want to use <code>-vf "transpose=1"</code> to rotate image 90 degrees clockwise:</p>
<!-- markdownlint-disable line_length -->
<div class="language-shell highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nv">CAMERA_COMMAND</span><span class="o">=</span>ffmpeg
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nv">CAMERA_COMMAND_EXTRA_PARAMS</span><span class="o">=</span><span class="s2">&quot;-y -i &#39;http://esp32-wrover-0461c8.local:8080/&#39; -vf &#39;transpose=1&#39; -vframes 1 -q:v 1 -f image2 -update 1 &quot;</span>
</span></code></pre></div>
<!-- markdownlint-disable line_length -->

<h3 id="adding-timestamp-to-the-image">Adding timestamp to the image</h3>
<p>Add ffmpeg <code>-vf</code> with parameters to the ffmpeg to the processing pipeline before output (<code>-f</code> flag), something like below:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>-vf<span class="w"> </span><span class="s1">&#39;drawtext=box=1:boxcolor=0x00000000@1:fontsize=60:fontcolor=yellow:text=%{localtime}:x=(w-text_w):y=(h-text_h)&#39;</span>
</span></code></pre></div>
<p>This will generate a yellow text in black background box in bottom right corner, and fontsize=60 works well with 1080p.</p>
<p>Below is example full command, <strong>notice the single quotes are important</strong>:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nv">CAMERA_COMMAND</span><span class="o">=</span>ffmpeg
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nv">CAMERA_COMMAND_EXTRA_PARAMS</span><span class="o">=</span><span class="s2">&quot;-y -i &#39;http://esp32-wrover-0461c8.local:8080/&#39; -vf &#39;transpose=1&#39; -vframes 1 -q:v 1 -vf &#39;drawtext=box=1:boxcolor=0x00000000@1:fontsize=60:fontcolor=yellow:text=%{localtime}:x=(w-text_w):y=(h-text_h)&#39; -f image2 -update 1 &quot;</span>
</span></code></pre></div>
<h3 id="other-processing">Other processing</h3>
<p>Frankly speaking you can do anything you want with ffmpeg, for example</p>
<p><code>-vf transpose=1,shufflepixels=m=block:height=16:width=16</code></p>
<p>which effectively shuffles image blocks around.
Why? why not :D</p>
<h3 id="image-output-quality">Image output quality</h3>
<p>To improve output image quality (especially when doing <code>-r 1 -update 1</code> from the constant stream) then add at the end</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>-b:v<span class="w"> </span>8000k
</span></code></pre></div>
<p>For example:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>ffmpeg<span class="w"> </span>-hide_banner<span class="w"> </span>-loglevel<span class="w"> </span>warning<span class="w"> </span>-f<span class="w"> </span>hls<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;http://mediamtx-hls.intra.hlds.pl/cam/index.m3u8&#39;</span><span class="w"> </span>-r<span class="w"> </span><span class="m">1</span><span class="w"> </span>-update<span class="w"> </span><span class="m">1</span><span class="w"> </span>-vf<span class="w"> </span><span class="s1">&#39;drawtext=box=1:boxcolor=0x00000000@1:fontsize=60:fontcolor=yellow:text=%{localtime}:x=16:y=(h-text_h)&#39;</span><span class="w"> </span>-y<span class="w"> </span>-b:v<span class="w"> </span>8000k<span class="w"> </span>/data/shared/snapshot.jpg
</span></code></pre></div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-custom">2025-09-25 23:58:47 +0200 (UTC)</span>
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../service.kubernetes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Kubernetes">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Kubernetes
              </div>
            </div>
          </a>
        
        
          
          <a href="../configuration.env.full/" class="md-footer__link md-footer__link--next" aria-label="Next: Configuration all env vars">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Configuration all env vars
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer", "toc.follow", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>